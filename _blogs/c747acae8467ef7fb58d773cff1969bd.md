---
layout: article
category: Research
date: 2023-05-31
title: 如何在 macOS 上录制抖音的直播（如何获取抖音的推流源）
---
<!-- excerpt-start -->
最近在抖音上看到一些直播真的很好玩，就想录制下来。所以就研究了一下如何录制这些直播，方法有两种：录屏和从推流源下载。

前者当然是最简单的了，但是如果使用录屏有几个问题：
1. 录屏的码率一般远远大于直播实际的码率，这样导致最后的录像文件有点大，但是画质又一般（这种情况下转码是会有严重的画质损失的，远比高清高码率的视频转码之后损失的画质要大得多）
2. 一次只能录制一个人的，这样如果几个人就不方便。

所以后者无论是在便捷性和存储方面都比录屏要好得多。而从推流源下载最关键的一步就是：如何获取推流源。

由于本文是大致下载的介绍，而不是编写脚本批量下载的介绍（后面会单独写一篇，列在这里），所以只介绍一下步骤。

获取推流源其实非常简单，在 macOS 上，下载推流源的视频只需要一个 Safari 即可。

首先打开 Safari，在“设置”-“高级”中，勾选“在菜单栏中显示“开发”菜单”，如下：

<img alt="在“设置”-“高级”中，勾选“在菜单栏中显示“开发”菜单”" src="/assets/images/dc26346f66957a977f05c991774c20f8.png" style="box-shadow: 0px 0px 0px 0px">

然后打开想要录制的直播间，右键网页的空白区域，点击“查看元素”，然后就能看到网页的源码、元素等内容，如下:

![打开想要录制的抖音直播间，右键网页的空白区域，点击“查看元素”](/assets/images/8d402f52a20275733073b3b5aace021a.png)

<img alt="然后就能看到网页的源码、元素等内容" src="/assets/images/4ca31da3b10bf46583c159d83fcb2751.png" style="box-shadow: 0px 0px 0px 0px">

这时候选择“网络”这一部分，然后在右上角搜索“flv”，因为抖音直播推流是用的 flv 格式。这时候显示如下：

<img alt="选择“网络”这一部分，然后在右上角搜索“flv”" src="/assets/images/a4ad3b528ef3c756847542890aeda1a0.png" style="box-shadow: 0px 0px 0px 0px">

然后拷贝这个文件的链接，在搜索栏输入它，会直接触发下载，可以看到这里的下载速度就是推流的码率，也就是正在录制直播：

![拷贝这个文件的链接，在搜索栏输入它，会直接触发下载，可以看到这里的下载速度就是推流的码率，也就是正在录制直播](/assets/images/7390953c62a4449f8447c10e686f4aa9.png)

那么如何终止录制呢？当然就是停止下载，如果直播关闭了，那么会变成 FLV 文件。但是如果是手动暂停下载，这时候下载的文件还是`.download`后缀的，直接没法用播放器查看.

![这时候下载的文件还是`.download`后缀的](/assets/images/f89dd961606b56312b075d96729479a8.png)

这时候需要右键，选择“显示包内容”，然后看到一个 flv 文件，这时候就可以使用 VLC 之类支持的播放器查看了。

<img alt="这时候需要右键，选择“显示包内容”" src="/assets/images/13bff9b7b0b2b324522e934afd0aa077.png" style="box-shadow: 0px 0px 0px 0px">

<img alt="看到一个 flv 文件" src="/assets/images/8524f7bfe823c93c90f38945b3c07cc1.png" style="box-shadow: 0px 0px 0px 0px">

但是这里会发现，没办法拖动进度条，不然会回到开始，或者结束播放。所以最好还是转一下码，用硬件加速的话还是蛮快的。

希望能帮到有需要的人～