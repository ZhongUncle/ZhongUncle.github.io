<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv='content-language' content='zh-CN'>
        <title>Python 解析获取 URL 参数以及使用</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/assets/css/headerstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/blogstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Python 解析获取 URL 参数以及使用</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Python 解析获取 URL 参数以及使用" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="下文中使用的 URL 地址是：https://www.example.com/?keyword=abc&amp;id=12 Python 解析获取 URL 参数的步骤如下：" />
<meta property="og:description" content="下文中使用的 URL 地址是：https://www.example.com/?keyword=abc&amp;id=12 Python 解析获取 URL 参数的步骤如下：" />
<link rel="canonical" href="http://localhost:4000/blogs/7dc37fce4d4bd96f87677464c78b75b3.html" />
<meta property="og:url" content="http://localhost:4000/blogs/7dc37fce4d4bd96f87677464c78b75b3.html" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-06-09T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Python 解析获取 URL 参数以及使用" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-09T00:00:00+08:00","datePublished":"2022-06-09T00:00:00+08:00","description":"下文中使用的 URL 地址是：https://www.example.com/?keyword=abc&amp;id=12 Python 解析获取 URL 参数的步骤如下：","headline":"Python 解析获取 URL 参数以及使用","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blogs/7dc37fce4d4bd96f87677464c78b75b3.html"},"url":"http://localhost:4000/blogs/7dc37fce4d4bd96f87677464c78b75b3.html"}</script>
<!-- End Jekyll SEO tag -->

        
        <!-- Microsoft Clarity -->
        <script type="text/javascript">
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "ix8xlal10a");
        </script>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-SS87H0FDV7"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-SS87H0FDV7');
        </script>
    </head>
    <body>
        <div class="stackedit__html">
            <!-- 这个文件里是用来生成导航栏的 -->
<div class="header">
    
        <a href="/index.html" class="headerItem">
            主页
        </a>
    
        <a href="/swift.html" class="headerItem">
            Swift
        </a>
    
        <a href="/unix.html" class="headerItem">
            UNIX
        </a>
    
        <a href="/c.html" class="headerItem">
            C
        </a>
    
        <a href="/assembly.html" class="headerItem">
            Assembly
        </a>
    
        <a href="/go.html" class="headerItem">
            Go
        </a>
    
        <a href="/plan9.html" class="headerItem">
            Plan 9
        </a>
    
        <a href="/web.html" class="headerItem">
            Web
        </a>
    
        <a href="/mcu.html" class="headerItem">
            MCU
        </a>
    
        <a href="/research.html" class="headerItem">
            Research
        </a>
    
        <a href="/non-tech.html" class="headerItem">
            Non-Tech
        </a>
    
</div>
            <h1>Python 解析获取 URL 参数以及使用</h1>
            <div class="bloginfo">
                <p class="info">2022-06-09 ｜ <a href="/web.html"> Web</a> ｜ 630 字</p>
            </div>
            <p>下文中使用的 URL 地址是：<code class="language-plaintext highlighter-rouge">https://www.example.com/?keyword=abc&amp;id=12</code>
<!-- excerpt-start -->
Python 解析获取 URL 参数的步骤如下：</p>

<h2 id="首先导入-python3-自带的urllibparse">首先导入 Python3 自带的<code class="language-plaintext highlighter-rouge">urllib.parse</code></h2>
<p>该模块用于将 URL 解析为各部分（需要注意的是解析的是字符串，所以要加引号）：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">parse</span>
</code></pre></div></div>

<p>或者</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>
</code></pre></div></div>

<h2 id="然后使用urlparse来将字符串解析成-url">然后使用<code class="language-plaintext highlighter-rouge">urlparse</code>来将字符串解析成 URL</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">url</span><span class="o">=</span><span class="n">parse</span><span class="p">.</span><span class="n">urlparse</span><span class="p">(</span><span class="s">"https://www.example.com/?keyword=abc&amp;id=12"</span><span class="p">)</span>
</code></pre></div></div>

<p>或者直接</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">url</span><span class="o">=</span><span class="n">urlparse</span><span class="p">(</span><span class="s">"https://www.example.com/?keyword=abc&amp;id=12"</span><span class="p">)</span>
</code></pre></div></div>

<p>这时候<code class="language-plaintext highlighter-rouge">url</code>变量就包含了 URL 的各部分信息，如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">url</span>
<span class="n">ParseResult</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s">'https'</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s">'www.example.com'</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">'/'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="s">''</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="s">'keyword=abc&amp;id=12'</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="s">''</span><span class="p">)</span>
</code></pre></div></div>

<p>可以通过以下方式来访问其中某一部分的内容，这里以<code class="language-plaintext highlighter-rouge">query</code>部分为例（也就是参数部分）：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">url</span><span class="p">.</span><span class="n">query</span>
<span class="s">'keyword=abc&amp;id=12'</span>
</code></pre></div></div>

<h2 id="转换成字典格式">转换成字典格式</h2>
<p>假如需要将其以<strong>字典</strong>格式返回，那么就需要使用<code class="language-plaintext highlighter-rouge">parse.parse_qs</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">parad</span><span class="o">=</span><span class="n">parse</span><span class="p">.</span><span class="n">parse_qs</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="n">query</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">parad</span>
<span class="p">{</span><span class="s">'keyword'</span><span class="p">:</span> <span class="p">[</span><span class="s">'abc'</span><span class="p">],</span> <span class="s">'id'</span><span class="p">:</span> <span class="p">[</span><span class="s">'12'</span><span class="p">]}</span>
</code></pre></div></div>

<p>也可以获取其中某一个参数对应的值，如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">para</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'id'</span><span class="p">)</span>
<span class="p">[</span><span class="s">'12'</span><span class="p">]</span>
</code></pre></div></div>

<p>或者直接使用：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">parse</span><span class="p">.</span><span class="n">parse_qs</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="n">query</span><span class="p">).</span><span class="n">get</span><span class="p">(</span><span class="s">'id'</span><span class="p">)</span>
<span class="p">[</span><span class="s">'12'</span><span class="p">]</span>
</code></pre></div></div>

<h2 id="转换成列表格式">转换成列表格式</h2>
<p>假如需要将其以<strong>列表</strong>格式返回，列表里的元素是元组（tuple）格式，那么就需要使用<code class="language-plaintext highlighter-rouge">parse.parse_qsl</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">paral</span><span class="o">=</span><span class="n">parse</span><span class="p">.</span><span class="n">parse_qsl</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="n">query</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">paral</span>
<span class="p">[(</span><span class="s">'keyword'</span><span class="p">,</span> <span class="s">'abc'</span><span class="p">),</span> <span class="p">(</span><span class="s">'id'</span><span class="p">,</span> <span class="s">'12'</span><span class="p">)]</span>
</code></pre></div></div>

<p>使用起来，没有字典那么方便直接，如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">paral</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="s">'keyword'</span>
</code></pre></div></div>

<p>更详细严谨的介绍和使用方法可以查看官方文档：<a href="https://docs.python.org/3/library/urllib.parse.html">https://docs.python.org/3/library/urllib.parse.html</a></p>

<p>希望可以帮到有需要的人～</p>

        </div>
    </body>
</html>