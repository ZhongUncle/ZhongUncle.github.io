<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv='content-language' content='en'>
        <title>Python 如何对文件读取和写入</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/assets/css/headerstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/blogstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Python 如何对文件读取和写入 | ZhongUncle’s Blog</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Python 如何对文件读取和写入" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Python 在读取和写入一个文件的时候，需要创建一个文件对象（file object），然后才能进行读取写入。" />
<meta property="og:description" content="Python 在读取和写入一个文件的时候，需要创建一个文件对象（file object），然后才能进行读取写入。" />
<link rel="canonical" href="http://localhost:4000/blogs/fc3d2db6d7e9cfb8ed856c8f34364a11.html" />
<meta property="og:url" content="http://localhost:4000/blogs/fc3d2db6d7e9cfb8ed856c8f34364a11.html" />
<meta property="og:site_name" content="ZhongUncle’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-06-03T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Python 如何对文件读取和写入" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-03T00:00:00+08:00","datePublished":"2022-06-03T00:00:00+08:00","description":"Python 在读取和写入一个文件的时候，需要创建一个文件对象（file object），然后才能进行读取写入。","headline":"Python 如何对文件读取和写入","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blogs/fc3d2db6d7e9cfb8ed856c8f34364a11.html"},"url":"http://localhost:4000/blogs/fc3d2db6d7e9cfb8ed856c8f34364a11.html"}</script>
<!-- End Jekyll SEO tag -->

        
        <!-- Microsoft Clarity -->
        <script type="text/javascript">
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "ix8xlal10a");
        </script>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-SS87H0FDV7"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-SS87H0FDV7');
        </script>

        
    </head>
    <body>
        <div class="stackedit__html">
            <!-- 这个文件里是用来生成导航栏的 -->
<div class="header">
    
        <a href="/index.html" class="headerItem">
            主页
        </a>
    
        <a href="/swift.html" class="headerItem">
            Swift
        </a>
    
        <a href="/unix.html" class="headerItem">
            UNIX
        </a>
    
        <a href="/c.html" class="headerItem">
            C
        </a>
    
        <a href="/assembly.html" class="headerItem">
            Assembly
        </a>
    
        <a href="/go.html" class="headerItem">
            Go
        </a>
    
        <a href="/plan9.html" class="headerItem">
            Plan 9
        </a>
    
        <a href="/web.html" class="headerItem">
            Web
        </a>
    
        <a href="/mcu.html" class="headerItem">
            MCU
        </a>
    
        <a href="/research.html" class="headerItem">
            Research
        </a>
    
        <a href="/non-tech.html" class="headerItem">
            Non-Tech
        </a>
    
</div>
            <h1>Python 如何对文件读取和写入</h1>
            <div class="bloginfo">
                <p class="info">2022-06-03 ｜ <a href="/web.html"> Web</a> ｜ #Words: 926 </p>
            </div>
            <!-- excerpt-start -->
<p>Python 在读取和写入一个文件的时候，需要创建一个文件对象（file object），然后才能进行读取写入。</p>

<h2 id="文件对象">文件对象</h2>
<h3 id="为什么需要文件对象">为什么需要文件对象</h3>
<p>之所以要创建文件对象才能读写，是因为 Python 创建了一个中间层，这样用户就不用考虑底层的 io，通过中间层就可以实现读写。</p>

<h3 id="创建一个文件对象">创建一个文件对象</h3>
<p>使用<code class="language-plaintext highlighter-rouge">open()</code>会返回一个文件对象，最长使用的方式是配合两个参数：<code class="language-plaintext highlighter-rouge">open(filename,mode)</code>。</p>

<p>举个例子，假设有一个名为<code class="language-plaintext highlighter-rouge">hello.txt</code>，对其创建一个文件对象<code class="language-plaintext highlighter-rouge">f</code>：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'hello.txt'</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span>
</code></pre></div></div>

<p>这里的<code class="language-plaintext highlighter-rouge">'hello.txt'</code>就是文件名称，后面的<code class="language-plaintext highlighter-rouge">'r'</code>表示在阅读模式下读取。</p>

<p>各字符含义如下：</p>

<table>
  <thead>
    <tr>
      <th>字符</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'r'</code></td>
      <td>在阅读模式下，打开文件进行读取（也是默认模式）</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'w'</code></td>
      <td>打开文件进行写入（如果文件已经存在，那么从开头删减）</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'a'</code></td>
      <td>打开文件进行写入，如果文件已经存在，那么将内容附加到文件末尾</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'x'</code></td>
      <td>打开文件进行唯一的创建，如果文件已经存在，那么将会失败</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'b'</code></td>
      <td>二进制模式</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'t'</code></td>
      <td>文本模式（默认）</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">'+'</code></td>
      <td>打开文件进行更新（也就是同时开启读取和写入）</td>
    </tr>
  </tbody>
</table>

<p>默认模式是<code class="language-plaintext highlighter-rouge">'r'</code>，其实等价于<code class="language-plaintext highlighter-rouge">'rt'</code>。</p>

<p><strong>也就是说默认的是文本模式，这点非常重要，因为读取的时候会在行尾添加<code class="language-plaintext highlighter-rouge">\n</code>，如果是编写二进制文件，如果添加了<code class="language-plaintext highlighter-rouge">\n</code>的后果可想而知。</strong></p>

<p><strong>而且读取和写入要创建两个文件对象。</strong></p>

<p><code class="language-plaintext highlighter-rouge">open()</code>还有其他参数，具体请查看官方文档 <a href="https://docs.python.org/3.8/library/functions.html#open">https://docs.python.org/3.8/library/functions.html#open</a></p>

<h3 id="关闭文件对象">关闭文件对象</h3>
<p>在使用完文件对象之后，需要关闭来释放使用的资源。关闭文件使用<code class="language-plaintext highlighter-rouge">f.close()</code>即可。</p>

<p>不过，需要注意使用<code class="language-plaintext highlighter-rouge">with</code>的时候，如果不调用<code class="language-plaintext highlighter-rouge">f.write()</code>或者调用<code class="language-plaintext highlighter-rouge">f.close()</code>，那么即使程序成功退出，那么还是<strong>可能</strong>会导致<code class="language-plaintext highlighter-rouge">f.write()</code>的参数（也就是要写出的内容）不能完整地写入硬盘。</p>

<h3 id="读取和写入文件">读取和写入文件</h3>
<p>在创建文件对象之后，便可以对文件进行读取和写入。这里先进行读取。
假设有一个名为“1.txt”的文件。先针对读取和写入创建两个文本对象，读取使用默认模式，写入使用<code class="language-plaintext highlighter-rouge">a</code>模式。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">fr</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'1.txt'</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fw</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'1.txt'</span><span class="p">,</span><span class="s">'w'</span><span class="p">)</span>
</code></pre></div></div>

<p>然后写入“Hello World!”，可以看到返回了写入的长度，12 个字符。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">fw</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">'Hello World!'</span><span class="p">)</span>
<span class="mi">12</span>
</code></pre></div></div>

<p>读取查看一下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">fr</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="s">'Hello World!'</span>
</code></pre></div></div>

<p>希望可以帮到有需要的人哦～</p>

        </div>
        <!-- comment by utterances -->
        <script src="https://utteranc.es/client.js"
        repo="ZhongUncle/zhonguncle.github.io"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
        </script>
        <!-- <div class="footer__html">
            <p>
                You can find me in: 
                <a href="https://blog.csdn.net/qq_33919450">CSDN</a>
                <a href="https://github.com/ZhongUncle">GitHub</a>
            </p>
        </div> -->
    </body>
</html>