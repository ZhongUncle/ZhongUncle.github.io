<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv='content-language' content='en'>
        <title>Use Raspberry Pi Pico, DHT11, SSD1306 OLED to make thermo-hygrometer</title>
        <link rel="icon" type="image/x-icon" href="/assets/images/icon.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name='description' content='Recently, I want to use Raspberry Pi Pico, DHT11 THS and SSD1306 OLED screen to make a thermo-hygrometer. Although the official sample has these two devices, but I encountered a big pit, so I wrote this article to record the whole process. I want this project as a beginning of learning microcontroller.'>
        
        <link rel="stylesheet" type="text/css" href="/assets/css/headerstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/blogstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
        
        
        <!-- Clarity tracking code for https://zhonguncle.github.io/ -->
        <script type="text/javascript">
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "ky7zebz4nm");
        </script>
    </head>
    <body>
        <div class="stackedit__html">
            <!-- 这个文件里是用来生成导航栏的 -->
<div class="header">
    
        <a href="/index.html" class="headerItem">
            主页
        </a>
    
        <a href="/swift.html" class="headerItem">
            Swift
        </a>
    
        <a href="/unix.html" class="headerItem">
            UNIX
        </a>
    
        <a href="/c.html" class="headerItem">
            C
        </a>
    
        <a href="/assembly.html" class="headerItem">
            Assembly
        </a>
    
        <a href="/go.html" class="headerItem">
            Go
        </a>
    
        <a href="/web.html" class="headerItem">
            Web
        </a>
    
        <a href="/mcu.html" class="headerItem">
            MCU
        </a>
    
        <a href="/research.html" class="headerItem">
            Research
        </a>
    
        <a href="/non-tech.html" class="headerItem">
            Non-Tech
        </a>
    
</div>
            <h1>Use Raspberry Pi Pico, DHT11, SSD1306 OLED to make thermo-hygrometer</h1>
            <div class="bloginfo">
                <p class="info">2023-08-28 ｜ <a href="/mcu.html"> MCU</a> ｜ #Words: 8378 ｜ <a href="https://blog.csdn.net/qq_33919450/article/details/132504441"> 中文原版 </a></p>
            </div>
            <p>Recently, I want to use Raspberry Pi Pico, DHT11 THS and SSD1306 OLED screen to make a thermo-hygrometer. Although the official sample has these two devices, but I encountered a big pit, so I wrote this article to record the whole process. I want this project as a beginning of learning microcontroller.</p>

<p>This article will implement a program that can display the current temperature and humidity on the SSD1306 OLED screen, and also output this information through USB.</p>

<p>I put the source code in <a href="https://github.com/ZhongUncle/pico-temp-hum-oled">GitHub-ZhongUncle/pico-temp-hum-oled</a>, and compiled it in the <code class="language-plaintext highlighter-rouge">build</code> directory for readers to try. <strong>But the comment of it is in Chinese, if you want to read English, please read comment in this blog.</strong></p>

<h2 id="development-tools-and-environment">Development tools and environment</h2>
<p>Install <code class="language-plaintext highlighter-rouge">pico-sdk</code> and configure related environment variables. For this part, please refer to my other blog <a href="/blogs/5e449fdb610b2a4d7ee8ee742fbfe736.html">“How to use the Mac terminal to build C/C++ programs for Raspberry Pi pico for development, and how to deal with various problems without using any IDE or editor (such as VS Code )》</a>, I won’t repeat here.</p>

<h2 id="prepare-materials">Prepare materials</h2>
<p>The materials required:</p>
<ul>
  <li>Raspberry Pi Pico or Pico W;</li>
  <li>SSD1306 OLED screen;</li>
  <li>DHT11 temperature and humidity sensor;</li>
  <li>Several wires;</li>
  <li>Breadboard;</li>
  <li>Breadboard power supply (optional, as the Pico will suffice for powering the sensors and screen).</li>
</ul>

<p>DHT11 has two types: 3-pin and 4-pin:</p>

<p><img alt="3-pin and 4-pin DHT11" src="/assets/images/3079eef6fd384391a6ba3349fd3ee1bd.jpeg" height="200px" /></p>

<p>If it is 4-pin, not use pin 3:</p>

<p><img alt="4-pin, not use pin 3" src="/assets/images/2f883839ec814d74a017ecc0d3e75c88.jpeg" height="200px" /></p>

<p>If you have read the official documents or some other tutorials, you may see that we need a resistor (10k or 4.7k ohms) to pull up the data line, but this resistor does not actually affect the official code from running. In fact, It is not needed for operation, so it doesn’t matter.</p>

<h2 id="connect">Connect</h2>
<p>The pin diagram of Pico is as follows:</p>

<p><img src="/assets/images/1fa9d6e58bca4d9ba3483fbf7417f3dd.png" alt="pin diagram" /></p>

<p>The power supply for the entire circuit from Pico, using Pin 38 as ground and Pin 36 as the power. 3.3V meets both sensors. Generally, the sensor is marked with power and ground pin, so be connected according to the marks.</p>

<p>The <code class="language-plaintext highlighter-rouge">SCL</code> pin of the SSD1306 is connected to Pin 7 of Pico, while the <code class="language-plaintext highlighter-rouge">SDA</code> pin is connected to Pin 6 of Pico. These two pins were chosen because they are Pico’s default I2C protocol interface, and the SSD 1306 communicates according to the I2C protocol. You can also modify the pins, but this article uses the default pins.</p>

<p>If you want to use other pins, you can see below blogs:</p>

<ul>
  <li>This blog is for any situation: <a href="/blogs/514d58f2961fd8f7d36176bdb1208af0.html">“Choose I2C controller, SDA and SCL pins using C/C++ on Raspberry Pi Pico”</a></li>
  <li>This blog is for only one I2C device: <a href="/blogs/6a9f2929e74ab84354bed126ebd135b3.html">“Modify the default SDA and SCL pins of I2C using C/C++”</a></li>
</ul>

<blockquote>
  <p>If you don’t know what is I2C, here is an introduction:<a href="https://www.circuitbasics.com/basics-of-the-i2c-communication-protocol/">BASICS OF THE I2C COMMUNICATION PROTOCOL</a></p>
</blockquote>

<p>The <code class="language-plaintext highlighter-rouge">data</code> pin of DHT11 can be connected to any GP pin of Pico. GP15 or GP16 is recommended, because these two are usually close to the sensor on the breadboard and require shorter wires.</p>

<p>The image of linked devices is:</p>

<p><img src="/assets/images/4587d3df85af421497617e2442adc8ee.jpeg" alt="linked devices" /></p>

<h2 id="structure-of-project">Structure of Project</h2>
<p>Here is structure of project, you can see in <a href="https://github.com/ZhongUncle/pico-temp-hum-oled">GitHub-ZhongUncle/pico-temp-hum-oled</a>.</p>

<p>Create a new folder <code class="language-plaintext highlighter-rouge">pico-temp-hum</code> as root. Then go into it, create 3 files <code class="language-plaintext highlighter-rouge">font.h</code>, <code class="language-plaintext highlighter-rouge">pico-temp-hum.c</code>, <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> and a blank directory <code class="language-plaintext highlighter-rouge">build</code>. Finally, copy the <code class="language-plaintext highlighter-rouge">pico_sdk_import.cmake</code> file from <code class="language-plaintext highlighter-rouge">pico-sdk</code> to here:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir pico-temp-hum
$ cd pico-temp-hum
$ touch font.h pico-temp-hum.c CMakeLists.txt
$ mkdir build
$ cp ../pico-sdk/pico_sdk_init.cmake pico_sdk_init.cmake
</code></pre></div></div>

<p>Now the structure of project looks like:</p>

<p><img alt="structure of project" src="/assets/images/bcbca1ea28e24d62934dc7fb166aad8f.png" style="box-shadow: 0px 0px 0px 0px" /></p>

<p>We can write code now.</p>

<h2 id="source-code">Source code</h2>
<h3 id="fonth"><code class="language-plaintext highlighter-rouge">font.h</code></h3>
<p>First is <code class="language-plaintext highlighter-rouge">font.h</code> file, it stores font information.</p>

<p>There are two versions of SSD1306: 128x32 and 128x64. The pixels are divided into multiple pages by 8 rows vertically. For example, the 128x64 version in the picture above is arranged in RAM as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       | COL0 | COL1 | COL2 | COL3 |  ...  | COL126 | COL127 |
PAGE 0 |      |      |      |      |       |        |        |
PAGE 1 |      |      |      |      |       |        |        |
PAGE 2 |      |      |      |      |       |        |        |
PAGE 3 |      |      |      |      |       |        |        |
PAGE 4 |      |      |      |      |       |        |        |
PAGE 5 |      |      |      |      |       |        |        |
PAGE 6 |      |      |      |      |       |        |        |
PAGE 7 |      |      |      |      |       |        |        |
--------------------------------------------------------------
</code></pre></div></div>

<p>In each page (determine pixels by row and column):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      | COL0 | COL1 | COL2 | COL3 |  ...  | COL126 | COL127 |
COM 0 |      |      |      |      |       |        |        |
COM 1 |      |      |      |      |       |        |        |
:     |      |      |      |      |       |        |        |
COM 7 |      |      |      |      |       |        |        |
-------------------------------------------------------------
</code></pre></div></div>

<p>So it is better to use 8 pixels as height of font. Here we use the font of the MicroPython project, which is 8x8 pixels format, its width and height are perfect for SSD1306 since 128 is exactly a multiple of 8.</p>

<p>Enter the following content in <code class="language-plaintext highlighter-rouge">font.h</code> (this font is not made by myself, so don’t delete the comments):</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * This file is part of the MicroPython project, http://micropython.org/
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2013, 2014 Damien P. George
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */</span>
<span class="cp">#ifndef MICROPY_INCLUDED_STM32_FONT_PETME128_8X8_H
#define MICROPY_INCLUDED_STM32_FONT_PETME128_8X8_H
</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">uint8_t</span> <span class="n">font</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 32=</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 33=!</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 34="</span>
    <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="c1">// 35=#</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x6b</span><span class="p">,</span> <span class="mh">0x6b</span><span class="p">,</span> <span class="mh">0x3a</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 36=$</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 37=%</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="c1">// 38=&amp;</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 39='</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 40=(</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 41=)</span>
    <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="c1">// 42=*</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 43=+</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 44=,</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 45=-</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 46=.</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="c1">// 47=/</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 48=0</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 49=1</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 50=2</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 51=3</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="c1">// 52=4</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 53=5</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7b</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 54=6</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x79</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 55=7</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 56=8</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 57=9</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 58=:</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0xe4</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 59=;</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 60=&lt;</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 61==</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 62=&gt;</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x59</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 63=?</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 64=@</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x7e</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x7e</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 65=A</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 66=B</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 67=C</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 68=D</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 69=E</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 70=F</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7b</span><span class="p">,</span> <span class="mh">0x3a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 71=G</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 72=H</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 73=I</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 74=J</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 75=K</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 76=L</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="c1">// 77=M</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 78=N</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 79=O</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 80=P</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x5e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 81=Q</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 82=R</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x7b</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 83=S</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 84=T</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 85=U</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 86=V</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="c1">// 87=W</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 88=X</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 89=Y</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x71</span><span class="p">,</span> <span class="mh">0x59</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 90=Z</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 91=[</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="c1">// 92='\'</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 93=]</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 94=^</span>
    <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="c1">// 95=_</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 96=`</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 97=a</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 98=b</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 99=c</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 100=d</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 101=e</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x7e</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 102=f</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0xa4</span><span class="p">,</span> <span class="mh">0xa4</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 103=g</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 104=h</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 105=i</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0xfd</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 106=j</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 107=k</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 108=l</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="c1">// 109=m</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 110=n</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 111=o</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 112=p</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 113=q</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 114=r</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 115=s</span>
    <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 116=t</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 117=u</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 118=v</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="c1">// 119=w</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 120=x</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x9c</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 121=y</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 122=z</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 123={</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 124=|</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="c1">// 125=}</span>
    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="c1">// 126=~</span>
    <span class="mh">0xaa</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0xaa</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0xaa</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0xaa</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="c1">// 127</span>
<span class="p">};</span>

<span class="cp">#endif // MICROPY_INCLUDED_STM32_FONT_PETME128_8X8_H
</span></code></pre></div></div>

<blockquote>
  <p>I am creating fonts based on the system fonts of Mac OS 3.2. This font is very beautiful and is also a bitmap font. I implemented some letters and found that they are indeed much more beatiful, but the implementation is not easy. Because the width and height of this font are not 8 or a multiple of 8, some adjustments are needed. If it is done, the content above and in the GitHub project will be replaced.</p>
</blockquote>

<h3 id="pico-temp-humc"><code class="language-plaintext highlighter-rouge">pico-temp-hum.c</code></h3>
<h4 id="header">Header</h4>
<p>First add header:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;ctype.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;math.h&gt;</span><span class="cp">
#include</span> <span class="cpf">"pico/stdlib.h"</span><span class="cp">
#include</span> <span class="cpf">"hardware/i2c.h"</span><span class="cp">
#include</span> <span class="cpf">"hardware/gpio.h"</span><span class="cp">
#include</span> <span class="cpf">"ssd1306_font.h"</span><span class="cp">
</span></code></pre></div></div>

<h4 id="code-for-ssd1306">Code for SSD1306</h4>
<p>Add some macros that may be used later, most are SSD1306 commands. Please see comment for usage:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Set SSD1306_HEIGHT to 32 or 64 according to your SSD1306</span>
<span class="cp">#define SSD1306_HEIGHT              64
#define SSD1306_WIDTH               128
</span>
<span class="cp">#define SSD1306_I2C_ADDR            _u(0x3C)
</span>
<span class="c1">// The SSD1306 clock frequency. It is generally 400000 (40MHz), but there will be flickering. In order to slow down the flickering and improve the response speed,recommend to use 1000000 (100MHz).</span>
<span class="cp">#define SSD1306_I2C_CLK             1000000
</span>
<span class="c1">// Commands of SSD1306 (see more in https://www.digikey.com/htmldatasheets/production/2047793/0/0/1/ssd1306.html)</span>
<span class="cp">#define SSD1306_SET_MEM_MODE        _u(0x20)
#define SSD1306_SET_COL_ADDR        _u(0x21)
#define SSD1306_SET_PAGE_ADDR       _u(0x22)
#define SSD1306_SET_HORIZ_SCROLL    _u(0x26)
#define SSD1306_SET_SCROLL          _u(0x2E)
</span>
<span class="cp">#define SSD1306_SET_DISP_START_LINE _u(0x40)
</span>
<span class="cp">#define SSD1306_SET_CONTRAST        _u(0x81)
#define SSD1306_SET_CHARGE_PUMP     _u(0x8D)
</span>
<span class="cp">#define SSD1306_SET_SEG_REMAP       _u(0xA0)
#define SSD1306_SET_ENTIRE_ON       _u(0xA4)
#define SSD1306_SET_ALL_ON          _u(0xA5)
#define SSD1306_SET_NORM_DISP       _u(0xA6)
#define SSD1306_SET_INV_DISP        _u(0xA7)
#define SSD1306_SET_MUX_RATIO       _u(0xA8)
#define SSD1306_SET_DISP            _u(0xAE)
#define SSD1306_SET_COM_OUT_DIR     _u(0xC0)
#define SSD1306_SET_COM_OUT_DIR_FLIP _u(0xC0)
</span>
<span class="cp">#define SSD1306_SET_DISP_OFFSET     _u(0xD3)
#define SSD1306_SET_DISP_CLK_DIV    _u(0xD5)
#define SSD1306_SET_PRECHARGE       _u(0xD9)
#define SSD1306_SET_COM_PIN_CFG     _u(0xDA)
#define SSD1306_SET_VCOM_DESEL      _u(0xDB)
</span>
<span class="c1">// Height of page</span>
<span class="cp">#define SSD1306_PAGE_HEIGHT         _u(8)
</span><span class="c1">// Number of pages</span>
<span class="cp">#define SSD1306_NUM_PAGES           (SSD1306_HEIGHT / SSD1306_PAGE_HEIGHT)
</span><span class="c1">// Buffer of page content, this section will render to display in screen</span>
<span class="cp">#define SSD1306_BUF_LEN             (SSD1306_NUM_PAGES * SSD1306_WIDTH)
</span>
<span class="cp">#define SSD1306_WRITE_MODE         _u(0xFE)
#define SSD1306_READ_MODE          _u(0xFF)
</span></code></pre></div></div>

<p>Create a structure to store data of rendering area, including the starting column and starting page, so that we can render the entire screen or only a part:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">render_area</span> <span class="p">{</span>
    <span class="kt">uint8_t</span> <span class="n">start_col</span><span class="p">;</span>
    <span class="kt">uint8_t</span> <span class="n">end_col</span><span class="p">;</span>
    <span class="kt">uint8_t</span> <span class="n">start_page</span><span class="p">;</span>
    <span class="kt">uint8_t</span> <span class="n">end_page</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">buflen</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Declare a function to calculate the length of the rendering area and assign the value to the <code class="language-plaintext highlighter-rouge">buflen</code> variable of <code class="language-plaintext highlighter-rouge">render_area</code>. Because we may need to clear the buffer of the rendering screen, we need to know the length of the rendering area, otherwise some content will not be cleaned or overwritten. The specific situation will be mentioned later.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">calc_render_area_buflen</span><span class="p">(</span><span class="k">struct</span> <span class="n">render_area</span> <span class="o">*</span><span class="n">area</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Calculate the length of rendering area</span>
    <span class="n">area</span><span class="o">-&gt;</span><span class="n">buflen</span> <span class="o">=</span> <span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">end_col</span> <span class="o">-</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">start_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">area</span><span class="o">-&gt;</span><span class="n">end_page</span> <span class="o">-</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">start_page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Next is the code related to SSD1306 commands. SSD1306 supports a series of commands to operate the screen. Please check the datasheet for command details:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">SSD1306_send_cmd</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">cmd</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// I2C write process expects a control byte followed by data</span>
    <span class="c1">// this "data" can be a command or data to follow up a command</span>
    <span class="c1">// Co = 1, D/C = 0 =&gt; the driver expects a command</span>
    <span class="kt">uint8_t</span> <span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x80</span><span class="p">,</span> <span class="n">cmd</span><span class="p">};</span>
    <span class="c1">//First parameter indicates which i2c controller is used, i2c0 or i2c1. The default here is i2c0</span>
    <span class="c1">//Second parameter is the 7-bit address of the device to be read. This was set when defining the macro earlier and is 0x3C.</span>
    <span class="c1">//Third parameter is a pointer to the buffer to receive data. You may wonder, isn't the above an array? Array names in C are actually pointers)</span>
    <span class="c1">//Fourth parameter is the length of the received data (in bytes). Here it is 2</span>
    <span class="c1">//If the fifth parameter is true, then the host maintains control of the bus after exchanging data. Here is false</span>
    <span class="n">i2c_write_blocking</span><span class="p">(</span><span class="n">i2c_default</span><span class="p">,</span> <span class="n">SSD1306_I2C_ADDR</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SSD1306_send_cmd_list</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">num</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">SSD1306_send_cmd</span><span class="p">(</span><span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SSD1306_send_buf</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">buf</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//In horizontal address mode, the column address pointer is automatically incremented and includes the next page, so a buffer containing the entire frame can be sent in one exchange</span>
    <span class="c1">//Copy the framebuffer to a new buffer to add a control byte at the beginning</span>
    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">temp_buf</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">buflen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">temp_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">;</span>
    <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_buf</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="n">buflen</span><span class="p">);</span>

    <span class="n">i2c_write_blocking</span><span class="p">(</span><span class="n">i2c_default</span><span class="p">,</span> <span class="n">SSD1306_I2C_ADDR</span><span class="p">,</span> <span class="n">temp_buf</span><span class="p">,</span> <span class="n">buflen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>

    <span class="n">free</span><span class="p">(</span><span class="n">temp_buf</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Declare the initialization function of SSD1306. Notice the commands in <code class="language-plaintext highlighter-rouge">cmds[]</code> are all defined in the above macro area. Some need values as parameters, but some commands determine the setting values by themselves. This is just a simple array, not a special data structure.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">SSD1306_init</span><span class="p">()</span> <span class="p">{</span>
    <span class="cm">/* Here is the default complete process for resetting the process, but different manufacturers may be different */</span>
    <span class="kt">uint8_t</span> <span class="n">cmds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SSD1306_SET_DISP</span><span class="p">,</span>               <span class="c1">// Close SSD1306</span>
        <span class="cm">/* Map memory */</span>
        <span class="n">SSD1306_SET_MEM_MODE</span><span class="p">,</span>           <span class="c1">// Set address mode. 0 is the horizontal address mode, 1 is the vertical address mode, and 2 is the page address mode.</span>
        <span class="mh">0x00</span><span class="p">,</span>                           <span class="c1">// Set as horizontal address mode</span>
        <span class="cm">/* Resolution and Layout */</span>
        <span class="n">SSD1306_SET_DISP_START_LINE</span><span class="p">,</span>    <span class="c1">// Set the start line to 0 (if no parameters, it is 0 by default)</span>
        <span class="n">SSD1306_SET_SEG_REMAP</span> <span class="o">|</span> <span class="mh">0x01</span><span class="p">,</span>   <span class="c1">// Remap the partition, column address 127 is mapped to SEG0</span>
        <span class="n">SSD1306_SET_MUX_RATIO</span><span class="p">,</span>          <span class="c1">// Set multiplex transmission rate</span>
        <span class="n">SSD1306_HEIGHT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>             <span class="c1">// Height of display minus 1 (because start from 0)</span>
        <span class="n">SSD1306_SET_COM_OUT_DIR</span> <span class="o">|</span> <span class="mh">0x08</span><span class="p">,</span> <span class="c1">// Output scan direction. Here we scan from the bottom up, COM[N-1] to COM0</span>
        <span class="n">SSD1306_SET_DISP_OFFSET</span><span class="p">,</span>        <span class="c1">// Set offset of display</span>
        <span class="mh">0x00</span><span class="p">,</span>                           <span class="c1">// We set no offset</span>
        <span class="n">SSD1306_SET_COM_PIN_CFG</span><span class="p">,</span>        <span class="c1">// Set the COM (common) pin configuration. Pico will assign a special value</span>

<span class="cm">/* 128x32 resolution will use 0x02, 128x64 resolution can use 0x12. if it does not work, use 0x22 or 0x32 */</span>
<span class="cp">#if ((SSD1306_WIDTH == 128) &amp;&amp; (SSD1306_HEIGHT == 32))
</span>        <span class="mh">0x02</span><span class="p">,</span>
<span class="cp">#elif ((SSD1306_WIDTH == 128) &amp;&amp; (SSD1306_HEIGHT == 64))
</span>        <span class="mh">0x12</span><span class="p">,</span>
<span class="cp">#else
</span>        <span class="mh">0x02</span><span class="p">,</span>
<span class="cp">#endif
</span>        
        <span class="cm">/* Time and Drive schedule */</span>
        <span class="n">SSD1306_SET_DISP_CLK_DIV</span><span class="p">,</span>       <span class="c1">// Set the displayed clock divide ratio</span>
        <span class="mh">0x80</span><span class="p">,</span>                           <span class="c1">// Divide ratio of 1 in standard frequency</span>
        <span class="n">SSD1306_SET_PRECHARGE</span><span class="p">,</span>          <span class="c1">// Cycle of every exchange</span>
        <span class="mh">0xF1</span><span class="p">,</span>                           <span class="c1">// Vcc generate by Pico</span>
        <span class="n">SSD1306_SET_VCOM_DESEL</span><span class="p">,</span>         <span class="c1">// Set VCOMH cancel level</span>
        <span class="mh">0x30</span><span class="p">,</span>                           <span class="c1">//0.83xVcc</span>
        <span class="cm">/* Display */</span>
        <span class="n">SSD1306_SET_CONTRAST</span><span class="p">,</span>           <span class="c1">// Set contrast</span>
        <span class="mh">0xFF</span><span class="p">,</span>							<span class="c1">// Set contrast as 0xFF</span>
        <span class="n">SSD1306_SET_ENTIRE_ON</span><span class="p">,</span>          <span class="c1">// Set the entire screen to display the contents of the RAM</span>
        <span class="n">SSD1306_SET_NORM_DISP</span><span class="p">,</span>          <span class="c1">// Set up normal display (not upside down)</span>
        <span class="n">SSD1306_SET_CHARGE_PUMP</span><span class="p">,</span>        <span class="c1">// Set charge pump</span>
        <span class="mh">0x14</span><span class="p">,</span>                           <span class="c1">// Vcc generate by Pico</span>
        <span class="n">SSD1306_SET_SCROLL</span> <span class="o">|</span> <span class="mh">0x00</span><span class="p">,</span>      <span class="c1">// Set this will disables horizontal scrolling. This is important because if it is enabled, an error will occur when writing to memory</span>
        <span class="n">SSD1306_SET_DISP</span> <span class="o">|</span> <span class="mh">0x01</span><span class="p">,</span>        <span class="c1">//Open SSD1306 display</span>
    <span class="p">};</span>

    <span class="n">SSD1306_send_cmd_list</span><span class="p">(</span><span class="n">cmds</span><span class="p">,</span> <span class="n">count_of</span><span class="p">(</span><span class="n">cmds</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="function-for-rendering">Function for rendering</h4>
<p>Write the rendering function, it will render the data in the buffer to SSD1306:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">render</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="k">struct</span> <span class="n">render_area</span> <span class="o">*</span><span class="n">area</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use *area to update some area of SSD1306 display</span>
    <span class="kt">uint8_t</span> <span class="n">cmds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SSD1306_SET_COL_ADDR</span><span class="p">,</span>
        <span class="n">area</span><span class="o">-&gt;</span><span class="n">start_col</span><span class="p">,</span>
        <span class="n">area</span><span class="o">-&gt;</span><span class="n">end_col</span><span class="p">,</span>
        <span class="n">SSD1306_SET_PAGE_ADDR</span><span class="p">,</span>
        <span class="n">area</span><span class="o">-&gt;</span><span class="n">start_page</span><span class="p">,</span>
        <span class="n">area</span><span class="o">-&gt;</span><span class="n">end_page</span>
    <span class="p">};</span>
    
    <span class="n">SSD1306_send_cmd_list</span><span class="p">(</span><span class="n">cmds</span><span class="p">,</span> <span class="n">count_of</span><span class="p">(</span><span class="n">cmds</span><span class="p">));</span>
    <span class="n">SSD1306_send_buf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">area</span><span class="o">-&gt;</span><span class="n">buflen</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The next step is to process characters. Program will find the characters required from character set in <code class="language-plaintext highlighter-rouge">font.h</code>, then convert and transfer them. Finally display them on the OLED:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Get the index of character 'ch' from character set */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">GetFontIndex</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">ch</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">&gt;=</span> <span class="sc">' '</span> <span class="o">&amp;&amp;</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="mi">127</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="n">ch</span> <span class="o">-</span> <span class="sc">' '</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">return</span>  <span class="mi">0</span><span class="p">;</span> <span class="c1">// If no index is found, return index of space</span>
<span class="p">}</span>

<span class="cm">/* Output a character 'ch' to 'buf', start in (x, y) */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">WriteChar</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int16_t</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int16_t</span> <span class="n">y</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">ch</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// If out the edge of screen</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">SSD1306_WIDTH</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">SSD1306_HEIGHT</span> <span class="o">-</span> <span class="mi">8</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>

    <span class="c1">// As mentioned before, each row is actually a page. The height of a page is 8 pixels. The y here is also the upper bound of the row.</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>
	
	<span class="c1">// Get index of 'ch'</span>
    <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">GetFontIndex</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
    <span class="c1">// Calculate the actual initial position, which row (y * 128) and which (x)</span>
    <span class="kt">int</span> <span class="n">fb_idx</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="mi">128</span> <span class="o">+</span> <span class="n">x</span><span class="p">;</span>

	<span class="c1">// Output each bit in 'ch'</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">buf</span><span class="p">[</span><span class="n">fb_idx</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">font</span><span class="p">[</span><span class="n">idx</span> <span class="o">*</span> <span class="mi">8</span> <span class="o">+</span> <span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* Output multiple characters (a string) */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">WriteString</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int16_t</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int16_t</span> <span class="n">y</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">SSD1306_WIDTH</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">SSD1306_HEIGHT</span> <span class="o">-</span> <span class="mi">8</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="o">*</span><span class="n">str</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">WriteChar</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">*</span><span class="n">str</span><span class="o">++</span><span class="p">);</span>
        <span class="n">x</span><span class="o">+=</span><span class="mi">8</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="principle-of-dht11">Principle of DHT11</h4>
<p>Write code to get data from DHT11. Before that, you need to know the mechanism of DHT11. The overall process is as follows:</p>

<p><img src="/assets/images/9cbfb88ed5ea4c87800b294e05c9f44a.png" alt="mechanism of DHT11" /></p>

<p>Each parts are as follows:</p>

<p><img src="/assets/images/f4dd56b1b79846249f36dadbf9f1f7ec.png" alt="Each parts" /></p>

<p>When passing data, it is judged whether it is <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code> according to the following signal:</p>

<p><img src="/assets/images/8e3ce9ad0f1b407eb0d7c7c9317884f7.png" alt="`0` signal" /></p>

<p><img src="/assets/images/f91aa0f0bc8444e4a7a1079bf133e6ae.png" alt="`1` signal" /></p>

<p>You should pay attention to the duration time here:</p>
<ol>
  <li>At the beginning, the start signal and pulls down the voltage from Pico must no less than 18ms, so that DHT11 can obtain the signal;</li>
  <li>Next, Pico pulls up the voltage and waits for DHT11 to respond will takes 20~40us. <strong>This must be noted</strong>, because the relevant code in <code class="language-plaintext highlighter-rouge">pico-examples</code> does not wait for a response, which will be unable to obtain data, or failure to obtain data after a period of time;</li>
  <li>DHT11 sends a response and will keep it for 80us, then pull it high and keep it for 80us;</li>
  <li>When transmitting data, a low level of 50us and a high level of 26~28us means that the data is a <code class="language-plaintext highlighter-rouge">0</code>, and a low level of 50us and a high level of 70us means that the data is a <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>In addition, DHT11 cannot obtain data within the first 1000ms after power on. The fastest response time is 6 seconds and the slowest is 30s. Each communication takes approximately 4ms.</li>
</ol>

<p>The 40-bit data sent by DHT11 is high-bit first, the content is: 8-bit humidity integer + 8-bit humidity floating-point number + 8-bit temperature integer + 8-bit temperature floating-point number + 8-bit checksum.</p>

<h4 id="principles-and-code-of-dht11">Principles and Code of DHT11</h4>
<p>First set which GPIO pin is connected and set the maximum duration:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="n">uint</span> <span class="n">DHT_PIN</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="k">const</span> <span class="n">uint</span> <span class="n">MAX_TIMINGS</span> <span class="o">=</span> <span class="mi">85</span><span class="p">;</span>
</code></pre></div></div>

<p>Then create a structure to store the humidity and temperature obtained by DHT11:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">humidity</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">temperature</span><span class="p">;</span>
<span class="p">}</span> <span class="n">dht_reading</span><span class="p">;</span>
</code></pre></div></div>

<p>Next write the function to read data from DHT11</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">read_from_dht</span><span class="p">(</span><span class="n">dht_reading</span> <span class="o">*</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// The signal value has 40 bits (5 bytes)</span>
    <span class="kt">int</span> <span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
    <span class="c1">// Record the type of the previous signal</span>
    <span class="n">uint</span> <span class="n">last</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="c1">// Record the index of the current signal</span>
    <span class="n">uint</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
    <span class="cm">/* Pico sending signal stage */</span>
    <span class="c1">// The signal direction is DHT_PIN to GPIO_OUT, sending some signals to DHT11. 'dir' is direction</span>
    <span class="n">gpio_set_dir</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">,</span> <span class="n">GPIO_OUT</span><span class="p">);</span>
    <span class="c1">// Output low level to DHT_PIN and maintain it for 18ms, so that DHT11 can obtain this signal</span>
    <span class="n">gpio_put</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">18</span><span class="p">);</span>
    <span class="c1">// Output high level to DHT_PIN and maintain it for 40us to wait for the response of DHT11</span>
    <span class="n">gpio_put</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">sleep_us</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>

    <span class="cm">/* DHT sending signal stage */</span>
    <span class="c1">// Reverse the signal direction, from DHT_PIN to GPIO_IN, to obtain DHT11 data</span>
    <span class="n">gpio_set_dir</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">,</span> <span class="n">GPIO_IN</span><span class="p">);</span>
    
	<span class="c1">// Here start to obtain and process the signal from DHT11</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">uint</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_TIMINGS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    	<span class="c1">//'count' to count time, unit is 255</span>
        <span class="n">uint</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="c1">// If the obtained signal level is the same as the previous signal level, it will loop. This will consume the waiting time.</span>
        <span class="c1">// At the beginning, DHT11 has a low level of 80us as response, so when the first loop 'last' is 1 (high level), the loop is skipped directly, and then the 'last' also becomes 0 (low level). In this way, the second cycle will enter the following loop and consume time. After DHT11 is in high level, this operation is repeated.</span>
        <span class="c1">//The first 50us is also processed in this way.</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">gpio_get</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">)</span> <span class="o">==</span> <span class="n">last</span><span class="p">)</span> <span class="p">{</span>
        	<span class="c1">// Start iteration to count time</span>
            <span class="n">count</span><span class="o">++</span><span class="p">;</span>
            <span class="n">sleep_us</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
            <span class="c1">//If the current time has exceeded 100us, then the entire outer iteration will be skipped, but since break can only skip one iteration, the outer layer will have to break again.</span>
            <span class="c1">//Choose any value greater than the maximum period of the signal, not necessarily 100</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="mi">100</span><span class="p">)</span> 
            	<span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//Assign the current level to DHT_PIN</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">gpio_get</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">);</span>

        <span class="c1">// This if-else is necessary, it is used to completely jump out of the outer iteration. Otherwise, the integer part of the humidity and temperature will be displayed first, and then the floating point part of the humidity and temperature will be displayed. Unable to obtain complete data in one duration</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="mi">100</span><span class="p">)</span> 
			<span class="k">break</span><span class="p">;</span>

        <span class="c1">// Start getting data</span>
        <span class="c1">// i&gt;=4 is for the first three cycles are: the response of keeping low level, pulling high level and 50us starting from the first data bit.</span>
        <span class="c1">// i % 2 == 0 is because the odd number of times is 50us from the beginning of the data bit, and there is no stored data.</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
            <span class="c1">// j/8 indicate which byte this is</span>
            <span class="c1">// Shift one bit to right, so that only the rightmost bit of 8-bit needs to be set</span>
            <span class="n">data</span><span class="p">[</span><span class="n">j</span> <span class="o">/</span> <span class="mi">8</span><span class="p">]</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="c1">// If the current signal time exceeds 35, then set the rightmost bit to 1</span>
            <span class="c1">// This 35 is because 26~28 represents 0, and any value larger than this range represents 1. Since the communication time may take some time, some redundancy is left.</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">)</span> 
            	<span class="n">data</span><span class="p">[</span><span class="n">j</span> <span class="o">/</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="n">j</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// The 40-bit data obtained and the checksum (data[4] == ((data[0] + data[1] + data[2] + data[3]) &amp; 0xFF)) is also correct, then result is saved to the structure pointed to by 'result' pointer</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">40</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="p">((</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)))</span> <span class="p">{</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">humidity</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="p">((</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="o">-&gt;</span><span class="n">humidity</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">humidity</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">temperature</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="p">(((</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="o">-&gt;</span><span class="n">temperature</span> <span class="o">&gt;</span> <span class="mi">125</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">temperature</span> <span class="o">=</span> <span class="o">-</span><span class="n">result</span><span class="o">-&gt;</span><span class="n">temperature</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// If data error, output debug info</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Bad data</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="main-function"><code class="language-plaintext highlighter-rouge">main</code> function</h4>
<p>Here is the main body of the entire program. The functions declared above will be used to achieve the expected effects:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">stdio_init_all</span><span class="p">();</span>
    <span class="cm">/* Initial GPIO */</span>
    <span class="n">gpio_init</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">);</span>
    
    <span class="cm">/* Initial default i2c controller and pins */</span>
    <span class="n">i2c_init</span><span class="p">(</span><span class="n">i2c_default</span><span class="p">,</span> <span class="n">SSD1306_I2C_CLK</span><span class="p">);</span>
    <span class="n">gpio_set_function</span><span class="p">(</span><span class="n">PICO_DEFAULT_I2C_SDA_PIN</span><span class="p">,</span> <span class="n">GPIO_FUNC_I2C</span><span class="p">);</span>
    <span class="n">gpio_set_function</span><span class="p">(</span><span class="n">PICO_DEFAULT_I2C_SCL_PIN</span><span class="p">,</span> <span class="n">GPIO_FUNC_I2C</span><span class="p">);</span>
    <span class="n">gpio_pull_up</span><span class="p">(</span><span class="n">PICO_DEFAULT_I2C_SDA_PIN</span><span class="p">);</span>
    <span class="n">gpio_pull_up</span><span class="p">(</span><span class="n">PICO_DEFAULT_I2C_SCL_PIN</span><span class="p">);</span>
    
    <span class="cm">/* Initial SSD1306 */</span>
    <span class="n">SSD1306_init</span><span class="p">();</span>

    <span class="cm">/* Initial rendering area of frame_area (SSD1306_WIDTH x SSD1306_NUM_PAGES) */</span>
    <span class="k">struct</span> <span class="n">render_area</span> <span class="n">frame_area</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nl">start_col:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">end_col</span> <span class="o">:</span> <span class="n">SSD1306_WIDTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">start_page</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">end_page</span> <span class="o">:</span> <span class="n">SSD1306_NUM_PAGES</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="p">};</span>
    
    <span class="cm">/* calculate length of buffer for frame_area */</span>
    <span class="n">calc_render_area_buflen</span><span class="p">(</span><span class="o">&amp;</span><span class="n">frame_area</span><span class="p">);</span>
    
    <span class="cm">/* Declare a array to store buffer, the length is above */</span>
    <span class="kt">uint8_t</span> <span class="n">buf</span><span class="p">[</span><span class="n">SSD1306_BUF_LEN</span><span class="p">];</span>
    <span class="cm">/* Empty the buffer and screen */</span>
    <span class="c1">// Assign 0 to every elements of array (because maybe memory have something, it will display blurry)</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SSD1306_BUF_LEN</span><span class="p">);</span>
    <span class="c1">// Render the buffer</span>
    <span class="n">render</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">frame_area</span><span class="p">);</span>
    
    <span class="c1">// Stores strings of temperature and humidity for rendering to the screen.</span>
    <span class="kt">char</span> <span class="n">temp</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">hum</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="c1">// Wait 1000ms before the first time, otherwise the data acquisition may fail.</span>
	<span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
	
    <span class="cm">/* Continuously loop to obtain data and render it to the screen */</span>
    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    	<span class="c1">// Declare a variable 'dht_reading': 'reading'. And store the data read from DHT11 into 'reading'.</span>
        <span class="n">dht_reading</span> <span class="n">reading</span><span class="p">;</span>
        <span class="n">read_from_dht</span><span class="p">(</span><span class="o">&amp;</span><span class="n">reading</span><span class="p">);</span>
        
        <span class="c1">// Assign 0 to each element of array, otherwise the content displayed last time may still be in the buffer, which will cause problems in the next rendering and display.</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SSD1306_BUF_LEN</span><span class="p">);</span>
		
		<span class="c1">// Generate strings for printing, store them in 'temp' and 'hum' character arrays, and then write them to the buffer array 'buf'.</span>
        <span class="n">sprintf</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="s">"temp = %.02f C"</span><span class="p">,</span> <span class="n">reading</span><span class="p">.</span><span class="n">temperature</span><span class="p">);</span>
        <span class="c1">// This 'printf' is for serial port USB output.</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"temp = %.02f C</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">reading</span><span class="p">.</span><span class="n">temperature</span><span class="p">);</span>
        <span class="n">WriteString</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">temp</span><span class="p">);</span>
        <span class="n">sprintf</span><span class="p">(</span><span class="n">hum</span><span class="p">,</span> <span class="s">"hum  = %.02f %%"</span><span class="p">,</span> <span class="n">reading</span><span class="p">.</span><span class="n">humidity</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"hum  = %.02f %%</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">reading</span><span class="p">.</span><span class="n">humidity</span><span class="p">);</span>
        <span class="c1">// Since the line height is 8, the y value in the second line needs to be added to 8. If you want the line spacing to look better, you can set it to 10</span>
        <span class="n">WriteString</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">hum</span><span class="p">);</span>
        
        <span class="c1">// Rendering the buffer</span>
        <span class="n">render</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">frame_area</span><span class="p">);</span>
        
        <span class="c1">// Wait 6000ms, because the minimum response time of DHT11 is 6 seconds</span>
        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">6000</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="cmakeliststxt"><code class="language-plaintext highlighter-rouge">CMakeLists.txt</code></h3>
<p>Then enter the following content in the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake_minimum_required(VERSION 3.12)

include(pico_sdk_import.cmake)

project(pico-temp-hum)

pico_sdk_init()

if (TARGET tinyusb_device)
	add_executable(pico-temp-hum
        	pico-temp-hum.c
        )

    # Add dependencies
    target_link_libraries(pico-temp-hum pico_stdlib hardware_adc hardware_i2c)

    # Activate USB output, turn off UART output (can open both)
    pico_enable_stdio_usb(pico-temp-hum 1)
    pico_enable_stdio_uart(pico-temp-hum 0)

    # map /bin/hex/uf2, etc.
    pico_add_extra_outputs(pico-temp-hum)

elseif(PICO_ON_DEVICE)
    message(WARNING "not building hello_usb because TinyUSB submodule is not initialized in the SDK")
endif()
</code></pre></div></div>

<h2 id="build-project-and-burn">Build project and burn</h2>
<p>First go to the <code class="language-plaintext highlighter-rouge">build</code> directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd build
</code></pre></div></div>

<p>Then build with commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cmake .. &amp;&amp; make -j6
...
[ 98%] Building C object CMakeFiles/pico-temp-hum.dir/Users/zhongyijiang/Desktop/pico/pico-sdk/src/rp2_common/hardware_i2c/i2c.c.obj
[100%] Linking CXX executable pico-temp-hum.elf
[100%] Built target pico-temp-hum
</code></pre></div></div>

<p>Then burn it to the Pico.</p>

<p>First press and hold the “BOOTSEL” button on the Pico, then plug in the cable to connect to the computer. At this time, the Pico will enter USB storage mode.</p>

<p>Then drag <code class="language-plaintext highlighter-rouge">pico-temp-hum.uf2</code> built into it. If you can only use the terminal, you can use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cp pico-temp-hum.uf2 /Volumes/RPI-RP2/pico-temp-hum.uf2
</code></pre></div></div>

<p>This is for macOS. If you are using Ubuntu or WSL, just change <code class="language-plaintext highlighter-rouge">/Volumes/</code> to <code class="language-plaintext highlighter-rouge">/dev/</code> (<code class="language-plaintext highlighter-rouge">RPI-RP2</code> may need to be lowercase).</p>

<p>At this time, an error pop-up will be displayed. Don’t worry, it is common.</p>

<h2 id="final">Final</h2>
<p>At this time you can see the effect like this:</p>

<p><img src="/assets/images/d81f513cd42a487a94ab511d8b00622f.jpeg" alt="work nice" /></p>

<p>If you use a serial communication program to view it, such as <code class="language-plaintext highlighter-rouge">minicom</code>, use the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ minicom -D /dev/cu.usbmodem1431301 -b 115200
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">cu.usbmodem1431301</code> here is not certain. The value may be different for each connection and needs to be modified according to the actual name.</p>

<p>You will see the display error in the serial communication program:</p>

<p><img alt="display error" src="/assets/images/64f939e019b94483af63d9284333179b.png" style="box-shadow: 0px 0px 0px 0px" /></p>

<p>It can be seen that except for <code class="language-plaintext highlighter-rouge">%</code> which is not displayed well due to transmission problems, everything else is work nice and is the same as what is displayed on OLED.</p>

<p>I put the complete project on <a href="https://github.com/ZhongUncle/pico-temp-hum-oled">GitHub-ZhongUncle/pico-temp-hum-oled</a>, and put the compiled version in the <code class="language-plaintext highlighter-rouge">build</code> directory The content is convenient for readers to try.</p>

<h2 id="further-reading">Further reading</h2>
<p>Here are some materials that I found or referred to during the research process, as well as some blogs I wrote during the process. If you are interested, you can take a look.</p>

<p><a href="https://www.digikey.com/htmldatasheets/production/2047793/0/0/1/SSD1306.pdf">SSD1306 Advance Information</a>: This is a datasheet of SSD1306, it introduce many things, like the command.</p>

<p><a href="https://www.mouser.com/datasheet/2/758/DHT11-Technical-Data-Sheet-Translated-Version-1143054.pdf">DHT11 Humidity &amp; Temperature Sensor</a>: This is a document for DHT11, Some relevant information and operating mechanisms are introduced, and some images above come from this. It should be noted that the DHT11 documents of different manufacturers may be different.</p>

<p><a href="https://learn.sparkfun.com/tutorials/i2c/all">https://learn.sparkfun.com/tutorials/i2c/all</a>: This is an article introducing I2C. If you don’t know I2C, you can read it.</p>

<p><a href="https://forums.raspberrypi.com/viewtopic.php?t=338243">https://forums.raspberrypi.com/viewtopic.php?t=338243</a>: Someone in this post asked how to modify the default I2C pin, and then the official Raspberry Pi engineer answered the method.</p>

<p><img src="/assets/images/d430b95834c54b88bd104ef003be72bb.png" alt="Someone in this post asked how to modify the default I2C pin, and then the official Raspberry Pi engineer answered the method" /></p>

<p>But the method defined in the source code is not quite right, as engineer said not be sure. So I wrote a blog from some trial: <a href="/blogs/a05d93c02a242879e59e6c7e1455dd8d.html">Modify the default SDA and SCL pins of I2C of Raspi Pico using C/C++</a></p>

<p>Then I explored how to specify a certain pin by myself, instead of using the default value or modifying the default value: <a href="/blogs/514d58f2961fd8f7d36176bdb1208af0.html">Choose I2C controller, SDA and SCL pins using C/C++ on Raspberry Pi Pico</a></p>

<p>I know what the <code class="language-plaintext highlighter-rouge">_u</code> macro means through this post: <a href="https://forums.raspberrypi.com/viewtopic.php?t=330222#:~:text=#ifndef%20_u%20#ifdef%20__ASSEMBLER__%20#define%20_u%20%28x%29%20x,where%20the%20u%20suffix%20would%20have%20been%20illegal.">#define _u macro?</a></p>

<p>I hope these will help someone in need~</p>

        </div>
        <!-- comment by utterances -->
        <script src="https://utteranc.es/client.js"
        repo="ZhongUncle/zhonguncle.github.io"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
        </script>
        <!-- <div class="footer__html">
            <p>
                You can find me in: 
                <a href="https://blog.csdn.net/qq_33919450">CSDN</a>
                <a href="https://github.com/ZhongUncle">GitHub</a>
            </p>
        </div> -->
    </body>
</html>