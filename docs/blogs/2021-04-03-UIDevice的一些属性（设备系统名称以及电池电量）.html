<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Uidevice的一些属性（设备系统名称以及电池电量）</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/assets/css/headerstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/blogstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    </head>
    <body>
        <div class="stackedit__html">
            <!-- 这个文件里是用来生成导航栏的 -->
<div class="header">
    
        <a href="/index.html" class="headerItem">
            主页
        </a>
    
        <a href="/swiftui.html" class="headerItem">
            SwiftUI
        </a>
    
        <a href="/unix.html" class="headerItem">
            UNIX
        </a>
    
</div>
            <h1>Uidevice的一些属性（设备系统名称以及电池电量）</h1>
            <div class="bloginfo">
                <p class="info">2021-04-03 ｜ <a href="/swiftui.html"> SwiftUI</a> ｜ 585 字</p>
            </div>
            
            <!-- excerpt-start -->
<p>UIDevice是获取设备信息的一个API。</p>

<p>要添加<code class="language-plaintext highlighter-rouge">.current</code>，具体使用方法如下：</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></div>

<p>这样显示的是设备名称（通用-关于本机-名称），例如“xxx的iPhone”。</p>

<p>它有一些属性是可以直接使用的：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.name</code>：获得的是设备名称（通用-关于本机-名称），例如：xxx的iPhone。</li>
  <li><code class="language-plaintext highlighter-rouge">.model</code>：获得设备具体型号，例如：iPhone 11 Pro。</li>
  <li><code class="language-plaintext highlighter-rouge">.localizedModel</code>：和.model输出结果一样，不过会变成本地化字符串（as a localized string）。</li>
  <li><code class="language-plaintext highlighter-rouge">.systemName</code>：获得系统名称，例如：iOS。</li>
  <li><code class="language-plaintext highlighter-rouge">.systemVersion</code>：获得具体版本号，例如：14.4。</li>
</ul>

<p>关于电池方面，能显示状态（是否充电或者充满）以及电量。</p>

<p>首先需要开启isBatteryMonitoringEnabled，使用如下（变量、函数和闭包两种）：</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="nv">batteryLevel</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">isBatteryMonitoringEnabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">Int</span><span class="p">(</span><span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">batteryLevel</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
 
    <span class="k">return</span> <span class="n">data</span>
<span class="p">}</span>

<span class="c1">//函数</span>
<span class="kd">func</span> <span class="nf">battery</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="c1">//开启isBatteryMonitoringEnabled</span>
    <span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">isBatteryMonitoringEnabled</span> <span class="o">=</span> <span class="kc">true</span>
 
    <span class="c1">//获得电量（返回的是Float格式，范围是0-1，这里乘以100并且转换成整数形式）</span>
    <span class="k">let</span> <span class="nv">batterylevel</span> <span class="o">=</span> <span class="kt">Int</span><span class="p">(</span><span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">batteryLevel</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
    
    <span class="c1">//将电量作为返回值</span>
    <span class="k">return</span> <span class="n">batterylevel</span>
<span class="p">}</span>

<span class="c1">//闭包</span>
<span class="k">let</span> <span class="nv">battery</span> <span class="o">=</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="k">in</span>
    <span class="c1">//开启isBatteryMonitoringEnabled</span>
    <span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">isBatteryMonitoringEnabled</span> <span class="o">=</span> <span class="kc">true</span>
 
    <span class="c1">//获得电量（返回的是Float格式，范围是0-1，这里乘以100并且转换成整数形式）</span>
    <span class="k">let</span> <span class="nv">batterylevel</span> <span class="o">=</span> <span class="kt">Int</span><span class="p">(</span><span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">batteryLevel</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
    
    <span class="c1">//将电量作为返回值</span>
    <span class="k">return</span> <span class="n">batterylevel</span>
<span class="p">}</span>
</code></pre></div></div>

<p>然后我们使用这个函数的返回值，如下：</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"</span><span class="se">\(</span><span class="nf">battery</span><span class="p">()</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>我们就可以看到显示的当前电量了。</p>

        </div>
    </body>
</html>