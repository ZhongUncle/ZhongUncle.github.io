<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>「swiftui」使用videoplayer的时候，没有返回的叉叉，或者缺少其他功能</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/assets/css/headerstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/blogstyle.css" />
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    </head>
    <body>
        <div class="stackedit__html">
            <!-- 这个文件里是用来生成导航栏的 -->
<div class="header">
    
        <a href="/index.html" class="headerItem">
            主页
        </a>
    
        <a href="/swiftui.html" class="headerItem">
            SwiftUI
        </a>
    
        <a href="/unix.html" class="headerItem">
            UNIX
        </a>
    
</div>
            <h1>「swiftui」使用videoplayer的时候，没有返回的叉叉，或者缺少其他功能</h1>
            <div class="bloginfo">
                <p class="info">2022-01-28 ｜ <a href="/swiftui.html"> SwiftUI</a> ｜ 502 字</p>
            </div>
            
            <!-- excerpt-start -->
<p>我在使用SwiftUI自带的VideoPlayer的时候，发现在iPod Touch中，有返回的叉叉，但是在其他设备，例如 iPhone 13 mini 上就没有。如下：</p>

<p><img src="/assets/images/fcdb6a4107274fc9abf7c85db3029316.png" alt="请添加图片描述" />
<img src="/assets/images/6fa52574611f443d96f788462df7bebf.png" alt="请添加图片描述" /></p>

<p>这不是我想要的，查找半天之后都没找到解决办法。最后我发现可以很神奇的解决这一点。</p>

<p>首先我是通过以下代码来调用VideoPlayer</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">TableCellView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">playVideo</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">ZStack</span> <span class="p">{</span>
        <span class="c1">//点击该按钮后全屏</span>
        <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">playVideo</span> <span class="o">=</span> <span class="kc">true</span>
                    <span class="p">},</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"play.circle.fill"</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">largeTitle</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                    <span class="p">})</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">fullScreenCover</span><span class="p">(</span><span class="nv">isPresented</span><span class="p">:</span> <span class="err">$</span><span class="n">playVideo</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">VideoPlayer</span><span class="p">(</span><span class="nv">player</span><span class="p">:</span> <span class="kt">AVPlayer</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">forResource</span><span class="p">:</span> <span class="s">"v1"</span><span class="p">,</span> <span class="nv">withExtension</span><span class="p">:</span> <span class="s">"mov"</span><span class="p">)</span><span class="o">!</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>解决方法简单的离谱，忽略安全区域即可，也就是添加如下代码到VideoPlayer即可：</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="nf">ignoresSafeArea</span><span class="p">()</span>
</code></pre></div></div>

<p>完整代码如下：</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">TableCellView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">playVideo</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">ZStack</span> <span class="p">{</span>
        <span class="c1">//点击该按钮后全屏</span>
        <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">playVideo</span> <span class="o">=</span> <span class="kc">true</span>
                    <span class="p">},</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"play.circle.fill"</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">largeTitle</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                    <span class="p">})</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">fullScreenCover</span><span class="p">(</span><span class="nv">isPresented</span><span class="p">:</span> <span class="err">$</span><span class="n">playVideo</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">VideoPlayer</span><span class="p">(</span><span class="nv">player</span><span class="p">:</span> <span class="kt">AVPlayer</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">forResource</span><span class="p">:</span> <span class="s">"v1"</span><span class="p">,</span> <span class="nv">withExtension</span><span class="p">:</span> <span class="s">"mov"</span><span class="p">)</span><span class="o">!</span><span class="p">))</span>
            	<span class="o">.</span><span class="nf">ignoresSafeArea</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>真的是麻了</p>

        </div>
    </body>
</html>